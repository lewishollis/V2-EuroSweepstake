<!DOCTYPE html>
<html>
<head>
  <title>Matches</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="navigation">
    <a href="<%= leaderboard_index_path %>" class="button">Go to Groups</a>
    <a href="<%= leaderboard_path(:show) %>" class="button">Go to Leaderboard</a>
  </div>

  <h1>Matches</h1>

  <% if @error_message %>
    <p><%= @error_message %></p>
  <% else %>
    <div class="matches-list">
      <% @matches.each do |match| %>
        <div class="match">
          <div class="team-scores">
            <div class="team-score">
              <%= image_tag(match.home_friend_profile_picture_url, alt: match.home_friend_name) if match.home_friend_profile_picture_url.present? %>
              <div class ="friend-name">
                <%= match.home_friend_name %>
              </div>
              <div class="team-name">
                <%= match.home_team.name %>
              </div>
              <%= match.home_score %>
            </div>
            <div class="winner">
              <strong>Winner:</strong>
                <% if match.winner == "home" %>
                  <%= match.home_team.name %>
                <% elsif match.winner == "away" %>
                  <%= match.away_team.name %>
                <% else %>
                  TBC
                <% end %>

            </div>
            <div class="team-score">
              <%= image_tag(match.away_friend_profile_picture_url, alt: match.away_friend_name) if match.away_friend_profile_picture_url.present? %>
              <div class="friend-name">
              <%= match.away_friend_name %>
              </div>
                <div class="team-name">
                  <%= match.away_team.name %>
                </div>
              <%= match.away_score %>
            </div>
          </div>
          <div class="event-summary">
            <p><%= match.accessible_event_summary %></p>
          </div>
          <div class="match-details">
            <p><strong>Stage:</strong> <%= match.stage %></p>
            <p><strong>Fixture Date - </strong> <%= match.start_time.strftime("%B %d, %Y %H:%M") %></p>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</body>
</html>
